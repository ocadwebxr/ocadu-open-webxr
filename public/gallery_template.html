<!-- A TEMPLATE GALLERY SPACE. DUPLICATE THIS PAGE AND GIVE IT A UNIQUE NAME TO SHOWCASE YOUR WORK-->

<html>
  <head>
      <!-- ****************************************************************-->
      
      <!--   HEADER METADATA SECTION  -->
      <!-- Contains metadata describing the website -->

    <!--Gallery Title and Metadescription-->
    <title>Open WebXR Gallery Template Room</title>
    <meta
      name="description"
      content="Open VR Staging Ground, Gallery, and Meeting Place"
    />
    <meta charset="utf-8" />
    <link rel="icon" href="https://cdn.glitch.global/06e25459-7547-47e5-9d1d-9ea50f5cb1df/logo-ocadu.ico?v=1642359789385" type="image/x-icon">
    
    <!-- Five letter identifier for gallerymap.js (update this) -->
    <script>myPageID="YELLO"</script> 

    <!-- ****************************************************************-->
      
      <!--   HEADER SCRIPTS SECTION  -->
      <!-- Contains important scripts vital to the operation of the gallery.
    *   DO NOT MODIFY unless you know exactly what you are doing. -->

    <!-- BOOTSTRAP FEATURES (for layout) -->
    <!--   Bootstrap CSS for Preloader-->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootswatch/4.5.2/cyborg/bootstrap.min.css"
      integrity="sha384-nEnU7Ae+3lD52AK+RGNzgieBWMnEfgTbRHIwEvp1XXPdqdO6uLTd/NwXbzboqjc2"
      crossorigin="anonymous"
    />

    <!-- Bootstrap JS Dependencies-->
    <script
      src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"
      integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
      integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
      crossorigin="anonymous"
    ></script>
    
    <!--Font Awesome Iconography-->
    <script src="https://kit.fontawesome.com/f3fbe8f644.js" crossorigin="anonymous"></script>

    <!-- A-FRAME FEATURES (for gallery)-->
    
    <!-- A-Frame plugin (>1.1.0) -->
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script> 
    
    <!-- Old version (0.8.2) for Depthkit support. Has several bugs that may impact experience, use only if necessary
    <script src="https://aframe.io/releases/0.8.2/aframe.min.js"></script> -->
    
    <!-- Substitute movement script adding Sink-Float controls. (Also adds A-Frame 1.3.0 controls to 0.8.2) -->
    <script src="/js/wasd-controls-alt.js"></script>
    
    <!--   Move on mobile -->
    <script src="https://cdn.jsdelivr.net/gh/vulture-boy/aframe-mobile-controls/components/twoway-motion/twoway-motion.js"></script>

    <!--   Network Functionality Plugins   -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.4.0/socket.io.slim.js"></script>
    <script src="https://unpkg.com/networked-aframe@^0.7.1/dist/networked-aframe.min.js"></script>

    <!--   Pointcloud Plugin   -->
    <script src="https://unpkg.com/aframe-pointcloud-component/dist/aframe-pointcloud-component.min.js"></script>
    <!--   Plugin for randomizing avatar colours   -->
    <script src="https://unpkg.com/aframe-randomizer-components@^3.0.1/dist/aframe-randomizer-components.min.js"></script>
    <!-- Include HTML -->
    <script src="/js/include-html.js"></script>
    
    <!-- OCAD WebXR Repository Content -->
    <!-- Basic Components for your AFrame entities -->
    <script src="/js/basic_components.js"></script>
    <!--   Plugin for spawning users in a circle   -->
    <script src="/js/spawn-in-circle.component.js"></script>
        
    <!-- Enables Play-on-Click properties to ensure audio / video works on all devices -->
    <!-- Note: must add play-on-click-video components to video / play-on-click-audio components to audio -->
    <script src="/js/play-on-click.js"></script>
    
    <!-- Particle System (A-Frame >1.1.0) 
    <script src="https://ideaspacevr.github.io/aframe-particle-system-component/dist/aframe-particle-system-component.js"></script> -->
    
    <!-- Volumetric Video & Particles (A-Frame 0.8.2; requires downgrade)
    <script src="https://cdn.jsdelivr.net/gh/juniorxsound/DepthKit-A-Frame/dist/aframe.depthkit.js"></script> 
    <script src="https://unpkg.com/aframe-particle-system-component@1.1.x/dist/aframe-particle-system-component.min.js"></script> -->

<!-- ****************************************************************-->
      
      <!--   OPTIONAL SCRIPTS SECTION  -->
      <!-- For your own scripts, if you wish. -->

  </head>
  
<!-- ****************************************************************-->
      
      <!--   OVERLAY PANELS SECTION  -->
      <!-- Contains the button and panel overlay HTML code -->
  
  <body>
    
      <!-- Overlay scripts | NOTE: Must be located BEFORE all Overlay HTML code. -->
      <link rel="stylesheet" href="/overlay_style.css"> <!--Style Sheet for Overlay-->
      <script src="/js/infoOverlay.js"></script> <!-- General Overlay functions -->
      <script src="/js/gallerymap.js"></script>  <!-- Sitemapping -->
      <script src="/js/sitemap_overlay.js"></script>  <!-- Scripts for sitemap functions  -->
    
      <!--Overlay content begins here-->
      <div id="infoOverlay"> 
      
      <!-- Navigation Buttons -->
      <div id="overlayBtns">
        <a id="homeButtonBox" href="/index.html" target="_blank"><i id="homeButton" class="fas fa-home fa-3x"></i></a> <!--Home Button-->
        <a id="infoButtonBox"><i class="fas fa-info-circle fa-3x" id="infoButton" onclick="toggleElement('infoPopup')"></i></a> <!-- Information Pop-Up Button -->
        <a id="ctrlButtonBox" onclick="toggleElement('ctrlPopup');"><i id="ctrlButton" class="fas fa-gamepad fa-3x"></i></a>  <!-- Controls Pop-Up Button -->
        <a id="mapButtonBox" onclick="toggleElement('mapPopup');"><i id="mapButton" class="fas fa-map fa-3x"></i></a> <!-- Site Map Pop-Up Button -->
        <a id="fullButtonBox" onclick="toggleFullscreen();"><i id="fullButton" class="fas fa-expand fa-3x"></i></a>
      </div>
        <!-- Replaces home link with designated link in gallerymap.js -->
        <script>swapHome();</script>

      <!-- Overlay Panels -->
        
      <!-- Click Prompt Banner; depends on play-on-click.js and use of associated components-->
      <div class="overlayGreyout" id="click-anywhere-banner" >
        <div id="click-anywhere-image">
          <img src="https://cdn.glitch.global/06e25459-7547-47e5-9d1d-9ea50f5cb1df/click_prompt.png?v=1642895249993">
        </div>
      </div>
        
      <!-- Information Panel -->
        <div class="overlayPanel" id="infoPopup">
          <div class="container">
            <div class="row" >
              <div class="col">  
              <button class="overlayBtn" id="closeInfoWindowButton" onclick="closeElement('infoPopup')">X</button>
                
<!-- [subsection]****************************************************************-->
      
      <!--   ARTWORK DESCRIPTION SUBSECTION -->

                  <h3 id="artistName">Name, Your</h3>
                  Form and Time class, Fall 2021

                  <h4>Title of Work, 2021</h4>

                  <p>Artist Statement 
                    </p>

                <br>
<!-- [/subsection]****************************************************************-->     
                
       </div></div>
          
        <!-- Automatically populates with links to other galleries based on contents of your designated gallerymap.js-->
        <div id="neighbours"></div>
              <script>neighbourNavigation();</script>
          
        </div></div>

      <!-- Controls Panel -->
        <div class="overlayPanel" id="ctrlPopup">
          <div class="container">
            <div class="row" >
              <div class="col">
              <button class="overlayBtn" id="closeCtrlWindowButton" onclick="closeElement('ctrlPopup')">X</button>
                
              <!-- Controls information is loaded from an external source -->
              <div w3-include-html="/controls.html"></div>

       </div></div></div></div>
  
           <!-- Sitemap Panel -->
            <div class="overlayPanel" id="mapPopup">
              <div class="container">
                <div class="row" >
                  <div class="col">
                  <button class="overlayBtn" id="closeMapWindowButton" onclick="closeElement('mapPopup')">X</button>                  
                  <p>
                  <h3>Gallery Sitemap</h3>  
                  </p>
                  
                  <!-- This section is automatically populated based on gallerymap.js 
                            if sitemap_overlay.js is included in the header.
                      You can uncomment this if you wish to use it in your project. -->
                  
                  <!--<div class="container overflow-auto" id="tourListing"></div>
                  <script>populateTourListing();</script> -->
           </div>
          </div>
        </div>
      </div>


    </div>
  
  
<!-- ****************************************************************-->
      
      <!--   SCENE LOADING SECTION  -->
      <!-- Defines the network room, fog, loading screen background color. -->
      <!-- When you are finished editing, set 'debug' to false for improved performance -->
 
    <a-scene
      preloader="Just a moment...; clickToClose: false;"
      webxr="optionalFeatures: dom-overlay,unbounded; overlayElement: #infoOverlay;"
      loading-screen="backgroundColor: #111111"
      fog="type: linear; color: #222"
      networked-scene="
      room: network-room-name;
      debug: true;"
    >
      
      <!-- We can adjust how much time out assets have to load into the scene here (in milliseconds) -->
      <a-assets timeout="10000">

<!-- ****************************************************************-->
      
      <!--   ASSET LOADING SECTION -->
      <!-- Preloads assets before displaying scene + improves performance -->

        <!-- Assets go here-->
        <audio id="spatialSound" 
               crossorigin="anonymous"
               autoplay 
               loop="true" 
               src="https://cdn.glitch.global/8686da3b-c48a-495a-b7b1-008247912601/BLUE%20GRASS%20BLUES%20-%20CHICAGO%20BLUES%20DANCE%20ORCHESTRA.mp3?v=1645655040125" 
               ></audio>
        
        <video 
             id="felix" 
             crossorigin="anonymous" 
             autoplay 
             loop="true" 
             src="https://cdn.glitch.me/06e25459-7547-47e5-9d1d-9ea50f5cb1df%2FfelixDarwin.mp4?v=1635786992772"
         ></video>
        
        <a-asset-item
          id="arrowOBJ"
          crossorigin="anonymous" 
          src="https://cdn.glitch.me/06e25459-7547-47e5-9d1d-9ea50f5cb1df%2Farrow.obj?v=1638817282988"
        ></a-asset-item>
        
        <a-asset-item
          id="arrowMTL"
          crossorigin="anonymous" 
          src="https://cdn.glitch.me/06e25459-7547-47e5-9d1d-9ea50f5cb1df%2Farrow.mtl?v=1638817282798"
        ></a-asset-item>
        
        <pointcloud
          id="dragonPLY"
          crossorigin="anonymous" 
          src="https://cdn.glitch.com/06e25459-7547-47e5-9d1d-9ea50f5cb1df%2FDragon_v14_resampled.ply?v=1630007840857"
        ></pointcloud>


     <!--****************************************************************-->
        
        <!-- CORE ENTITY SECTION -->
        <!-- We don't recommend modifying assets here unless you know what you're doing. -->

        <!-- Avatar  -->
        
        <!-- You can make changes to the appearance of the avatar here-->
        <template id="avatar-template">
          <a-entity class="avatar" scale="0.5 0.5 0.5">
            
            <!-- 'Tadpole' Avatar -->
            <a-entity
                scale="0.5 0.5 0.5" 
                >
                <a-entity
                  class="player"
                  >
                    <!--Nucleus -->
                    <a-sphere
                        scale="0.5 0.5 0.5"
                        color="#333333"
                        blending="additive"
                        opacity="0.3"
                        position="0 0 -1"
                        >
                    </a-sphere>
                  <!-- Tail -->
                  <a-cone
                      class="head"
                      opacity="0.8"
                      transparent="true"
                      position="0 0 0"
                      rotation="0 90 90"
                      radius-bottom="0.5"
                      scale="1 2 1"
                          >
                  </a-cone>
              </a-entity>
            </a-entity>
          </a-entity>
        </template>
      </a-assets>

      <!-- Player/User entity -->
        <a-entity
          id="player"
          class="player"
          networked="template:#avatar-template;attachTemplateToLocal:false;"
          camera  
          look-controls
          wasd-controls-alt="acceleration:60; fly: true;"
          sink-float
          twoway-motion="speed: 35;"
          position="0 2 0"
          spawn-in-circle="radius:3"
        >
          <!-- Important: Syncs with cone in avatar-template to provide syncronous color.
           See NAF schema near bottom of page for details on which player properties are synced on the network. -->
          <a-cone class="head"
            visible="false"
            color="#DDDDDD"
            random-color="min: 0.0 0.0 0.0; max: 1.0 1.0 1.0"
          ></a-cone>
        </a-entity>
      
      <!-- Play-On-Click Trigger-->
      <a-entity play-on-click></a-entity>
      
         <!--****************************************************************-->
        
        <!-- ENVIRONMENT SECTION -->
        <!-- These assets pertain to the sky, lighting, and ground planes of your scene -->

      <!--    Lights    -->
      <a-entity
        id="ambientLight"
        light="color: #ffffff; intensity: 1; type: ambient;"
        visible=""
      ></a-entity>
      
      <!-- Positional Light -->
      <a-entity
        id="overheadLight"
        light="color: #ffffff; intensity: .5; type: directional;"
        position="0 6 0"
      ></a-entity> 

      <!--      Sky     -->
      <!-- Skybox for the gallery. 
      Image is optional. Image will not be visible if color is black (#000000) -->
      <!-- <img id="sky" src="YYYY"  crossorigin="anonymous" /> -->
      <!-- <a-sky src="#sky" color="#000000" rotation="0 -90 0"></a-sky> -->
      <a-sky color="#000000"></a-sky>

      <!--     Ground      -->
      <!-- Ground plane affected by skybox. 
      Image is optional. Depends on skybox for reflections by default -->
      <!-- <img id="ground" src="YYYY" crossorigin="anonymous" /> -->
      
      <!--<a-entity
        id="scenery"
        position="0 0 0"
        geometry="primitive: plane; width: 1000; height: 1000;"
        rotation="-90 0 0"
        material="src: #ground; repeat: 1000 1000; color: #484848; sphericalEnvMap: #sky;"
      >
      </a-entity> -->
      
      <!-- Particles -->
      <a-entity position="0 2.25 -15" particle-system="preset: snow"></a-entity>
      
    <!-- ****************************************************************-->
      
      <!--   SCENE CONTENT SECTION  -->
      <!-- Any entities you create should be placed here -->
      
        <!-- PLINTH 
      Plinth is a flat cylinder. 
      To change color, replace grey with an html color name or code. Code will be a #FFFFFF format.
      To make completely opaque, make opacity="1"-->
        <a-cylinder
          color="grey"
          opacity="0.7"
          height="0.05"
          radius="4"
          position="0 1 0"
        ></a-cylinder>

        <!-- Sample Pointcloud  with a 1D rotational element-->
        <a-pointcloud
          src="#dragonPLY"
          scale="1 1 1"
          position="0 2 0"
          size="0.002"
          animation="property: rotation; to: 0 360 0; dur: 12000; easing: linear; loop: true"
        >
        </a-pointcloud>

        <!-- 3D Rotation Example -->
        <a-box 
          color="tomato" 
          position="3 2 3"
          depth="0.5" height="0.5" width="0.5"
          rotate-time="rotationSpeed: 0.01 -0.01 0.02"
          animation__scale="property: scale; to: 1 1 10; dur: 16000; easing: linear; dir: alternate; loop: true"
          >
        </a-box>

        <!-- Hyperlink Hotspot Example 
          refer to https://www.w3schools.com/jsref/met_win_open.asp
          'name' property lists different target methods; default is _blank
        -->
        <a-box 
          color="yellow" 
          position="5 2 5"
          depth="0.5" height="0.5" width="0.5"
          hotspot-hyperlink="url: https://www.ocadu.ca/; target: _blank"
          >
        </a-box>

        <!-- Delayed Scale example -->
        <a-sphere
          color="green" 
          position="-3 2 -3"
          depth="0.5" height="0.5" width="0.5"
          delayed-scale
          >
        </a-sphere>
        
        
        <!-- 3D Sound Example -->
        <a-cone
            color="blue" 
            position="3 2 -3"
            rotation="90 90 0"
            radius-bottom=".2" radius-top="0.05"
            sound="autoplay: true; loop: true; rolloffFactor: 8; src: #spatialSound"
                  >
        </a-cone>

        <a-box 
          color="orange" 
          position="5 2 -5"
          scale="0.5 0.5 0.5"
          hotspot-teleport="detectionBox: 0.5 0.5 0.5; targetPos: 0 2 0"
          >
        </a-box>

        <!-- Video Plane Example -->
        <a-video 
          src="#felix"        
          width="4"
          height="3"     
          rotation="0 135 0"
          position="-3 3 3"
          >  
        </a-video>

        <!-- OBJ Example 
        Note: arrowOBJ and arrowMTL are loaded in the Assets section.
          If you want graphic textures, it needs to be embeded on export in the MTL; can't use external images.
        I highly recommend just exporting a single glTF / .glb file instead; much easier and has images embedded -->
        <a-obj-model 
          id="upArrow"  
          src="#arrowOBJ" 
          mtl="#arrowMTL" 
          position="7 7 7" 
          rotation="0 0 0" 
          scale="1 1 1">
        </a-obj-model>
      
        <!-- Depthkit Example
        This example will fail unless the template is set to use A-Frame 0.8.2. See README.md for details.
        The meta/video are samples provided with DepthKit.js
        <a-entity depthkit="type: wire;
                          metaPath: https://cdn.jsdelivr.net/gh/juniorxsound/DepthKit.js/assets/Chae/Chae_Demo_Upres.txt;
                          videoPath: https://cdn.jsdelivr.net/gh/juniorxsound/DepthKit.js/assets/Chae/Chae_Demo_Upres.webm;
                          autoplay: true;
                          loop: true;"
                  rotation="0 0 -90" 
                  position="2 1 -1">
        </a-entity>
        -->
      
    </a-scene> <!-- End of Scene; any object tags placed after this won't show up. -->

        <!-- ****************************************************************-->
      
      <!--   POST-SCRIPTS SECTION  -->
      <!-- Backend scripts that run after all previous content has loaded into the document -->
  
    <script>
      // This script is to make modifications to improve mobile experiences
      // e.g. adding the twoway motion component to the player
      var isMobile = AFRAME.utils.device.isMobile();

      if (isMobile) {

      }

      // Networked Properties schema
      /* These are the properties of the player entity and other players that are synchronized with the network 
          avatar-template elements are for all users, and player elements are unique to the player.
          See https://github.com/networked-aframe/networked-aframe/blob/master/docs/getting-started-local.md
          (See Avatar and Player/User Entity sections)
      */
      NAF.schemas.add({
        template: "#avatar-template",
        components: [
          "position",
          "rotation",
          {
            selector: ".head",
            component: "material",
            property: "color"
          }
        ]
      });
      
      // Include externally-referenced HTML content as tagged
      includeHTML();
    </script>
  </body>
</html>
